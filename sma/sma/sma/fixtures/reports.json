[
{
    "pk": 1, 
    "model": "explorer.query", 
    "fields": {
        "created_at": "2014-02-06T14:11:19.933", 
        "sql": "SELECT \r\n\tpatients_patient.id AS \"Patient ID\", \r\n    given_names AS \"Given Names\", \r\n    family_name AS \"Family Name\", \r\n    TO_CHAR(date_of_birth, 'DD-MM-YYYY') AS \"DOB\",\r\n    sma_diagnosis.diagnosis AS \"Registry Type\",\r\n    groups_workinggroup.name AS \"Jurisdiction\"\r\nFROM patients_patient\r\n\tINNER JOIN groups_workinggroup \r\n    \ton patients_patient.working_group_id = groups_workinggroup.id\r\n    INNER JOIN sma_diagnosis\r\n    \ton patients_patient.id = sma_diagnosis.id", 
        "description": "", 
        "created_by": "Maciej Radochonski", 
        "title": "Patient Report"
    }
},
{
    "pk": 2, 
    "model": "explorer.query", 
    "fields": {
        "created_at": "2014-02-06T14:16:00.278", 
        "sql": "SELECT DISTINCT\r\n\tpatients_patient.id AS \"Patient ID\", \r\n    COALESCE(NULLIF(genetic_gene.name, ''), 'Unknown') AS \"Gene\",\r\n    COALESCE(NULLIF(sma_diagnosis.diagnosis, ''), 'Unknown') AS \"Diagnosis\",\r\n    COALESCE(NULLIF(genetic_variationsma.dna_variation, ''), 'Unknown') AS \"DNA Variation\",\r\n    COALESCE(NULLIF(genetic_variationsma.technique, ''), 'Unknown') AS \"Technique\",\r\n    CASE\r\n    \tWHEN genetic_variationsma.exon_7_smn1_deletion IS NULL THEN 'Unknown'\r\n        WHEN genetic_variationsma.exon_7_smn1_deletion = 1 THEN 'Homozygous'\r\n        WHEN genetic_variationsma.exon_7_smn1_deletion = 2 THEN 'Heterozygous'\r\n        WHEN genetic_variationsma.exon_7_smn1_deletion = 3 THEN 'None'\r\n    END AS \"Deletion of Exon 7 SMN1 gene\",\r\n    CASE\r\n    \tWHEN genetic_variationsma.exon_7_sequencing IS True THEN 'Yes'\r\n        WHEN genetic_variationsma.exon_7_sequencing IS False THEN 'No'\r\n        ELSE 'Unknown'\r\n    END AS \"Exon 7 Sequencing\",\r\n    sma_diagnosis.diagnosis AS \"Diagnosis\", \r\n    CASE \r\n    \tWHEN sma_motorfunction.walk IS True THEN 'Yes' \r\n        WHEN sma_motorfunction.walk IS False THEN 'No'\r\n        ELSE 'Unknown' \r\n    END AS \"Currently Able To Walk\",\r\n    COALESCE(NULLIF(sma_motorfunction.wheelchair_use, ''), 'Unknown') AS \"Wheelchair Use\",\r\n    CASE \r\n    \tWHEN sma_surgery.surgery IS True THEN 'Yes' \r\n        WHEN sma_surgery.surgery IS False THEN 'No'\r\n        ELSE 'Unknown' \r\n    END AS \"Scoliosis Surgery\",\r\n    CASE\r\n    \tWHEN sma_feedingfunction.gastric_nasal_tube IS True THEN 'Yes'\r\n        WHEN sma_feedingfunction.gastric_nasal_tube IS False THEN 'No'\r\n        ELSE 'Unknown'\r\n    END AS \"Gastric/nasal tube\",\r\n    CASE\r\n        WHEN sma_clinicaltrials.id IS NULL THEN 'No'\r\n        ELSE 'Yes'\r\n    END AS \"Clinical Trials\",\r\n    COALESCE(NULLIF(sma_clinicaltrials.drug_name, ''), 'Unknown') AS \"Trial Drug Name\",\r\n    COALESCE(NULLIF(sma_clinicaltrials.trial_name, ''), 'Unknown') AS \"Trial Name\",\r\n    COALESCE(NULLIF(sma_clinicaltrials.trial_sponsor, ''), 'Unknown') AS \"Trial Sponsor\",\r\n    COALESCE(NULLIF(sma_clinicaltrials.trial_phase, ''), 'Unknown') AS \"Trial Phase\",\r\n    TO_CHAR(patients_patient.date_of_birth, 'DD-MM-YYYY') AS \"Date of birth\",\r\n    TO_CHAR(sma_diagnosis.updated, 'DD-MM-YYYY') AS \"Last updated\",\r\n    patients_patient.postcode AS \"State/Province, postcode\",\r\n    CASE \r\n    \tWHEN sma_motorfunction.sit IS True THEN 'Yes' \r\n        WHEN sma_motorfunction.sit IS False THEN 'No'\r\n        ELSE 'Unknown' \r\n    END AS \"Currently able to sit without support\",\r\n    COALESCE(NULLIF(sma_respiratory.non_invasive_ventilation, ''), 'Unknown') AS \"Non Invasive Ventilation\",\r\n    COALESCE(NULLIF(sma_respiratory.invasive_ventilation, ''), 'Unknown') AS \"Invasive Ventilation\",\r\n    CASE \r\n    \tWHEN sma_respiratory.fvc IS NOT NULL THEN CAST(sma_respiratory.fvc AS TEXT) || ' (' || sma_respiratory.fvc_date || ')' \r\n        ELSE 'Unknown'\r\n    END AS \"FVC score and date\",\r\n\tCASE\r\n        WHEN sma_otherregistries.id IS NULL THEN 'No'\r\n        ELSE 'Yes'\r\n    END AS \"Other Registries\",\r\n\tCASE\r\n        WHEN sma_familymember.id IS NULL THEN 'No'\r\n        ELSE 'Yes'\r\n    END AS \"Family History\",    \r\n\tsma_familymember.id AS \"Family Member ID\",\r\n    COALESCE(NULLIF(sma_familymember.sex, ''), 'Unknown') AS \"Sex\",\r\n    COALESCE(NULLIF(sma_familymember.relationship, ''), 'Unknown') AS \"Relationship\",\r\n    COALESCE(NULLIF(sma_familymember.family_member_diagnosis, ''), 'Unknown') AS \"Diagnosis\",\r\n    COALESCE(NULLIF(sma_diagnosis.classification, ''), 'Unknown') AS \"SMA Classification\"\r\nFROM sma_diagnosis\r\n\tINNER JOIN patients_patient ON sma_diagnosis.patient_id = patients_patient.id\r\n    INNER JOIN groups_workinggroup ON groups_workinggroup.id = patients_patient.working_group_id\r\n    FULL JOIN genetic_moleculardata ON genetic_moleculardata.patient_id = patients_patient.id\r\n    FULL JOIN genetic_variationsma ON genetic_variationsma.molecular_data_id = genetic_moleculardata.patient_id\r\n    FULL JOIN genetic_gene ON genetic_gene.id = genetic_variationsma.gene_id\r\n    FULL JOIN sma_motorfunction ON sma_diagnosis.id = sma_motorfunction.diagnosis_id\r\n    FULL JOIN sma_surgery ON sma_diagnosis.id = sma_surgery.diagnosis_id\r\n    FULL JOIN sma_clinicaltrials ON sma_diagnosis.id = sma_clinicaltrials.diagnosis_id\r\n    FULL JOIN sma_respiratory ON sma_diagnosis.id = sma_respiratory.diagnosis_id\r\n    FULL JOIN sma_otherregistries ON sma_diagnosis.id = sma_otherregistries.diagnosis_id\r\n    FULL JOIN sma_familymember ON sma_diagnosis.id = sma_familymember.diagnosis_id\r\n    FULL JOIN sma_feedingfunction ON sma_diagnosis.id = sma_feedingfunction.diagnosis_id\r\nWHERE groups_workinggroup.name = '$$jurisdiction$$'", 
        "description": "", 
        "created_by": "Maciej Radochonski (CCG)", 
        "title": "NMD Report"
    }
}
]
