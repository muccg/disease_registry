[
{
    "pk": 1, 
    "model": "explorer.query", 
    "fields": {
        "created_at": "2014-01-28T11:18:44.820", 
        "sql": "SELECT \r\n\tpatients_patient.id AS \"Patient ID\", \r\n    given_names AS \"Given Names\", \r\n    family_name AS \"Family Name\", \r\n    TO_CHAR(date_of_birth, 'DD-MM-YYYY') AS \"DOB\",\r\n    dmd_diagnosis.diagnosis AS \"Registry Type\",\r\n    groups_workinggroup.name AS \"Jurisdiction\"\r\nFROM patients_patient\r\n\tINNER JOIN groups_workinggroup \r\n    \ton patients_patient.working_group_id = groups_workinggroup.id\r\n    INNER JOIN dmd_diagnosis\r\n    \ton patients_patient.id = dmd_diagnosis.id", 
        "description": "", 
        "created_by": "Maciej Radochonski (CCG)", 
        "title": "Patient Report"
    }
},
{
    "pk": 2, 
    "model": "explorer.query", 
    "fields": {
        "created_at": "2014-01-29T09:29:48.806", 
        "sql": "SELECT DISTINCT\r\n\tpatients_patient.id AS \"Patient ID\", \r\n    COALESCE(NULLIF(genetic_gene.name, ''), 'Unknown') AS \"Gene\",\r\n    COALESCE(NULLIF(genetic_variation.exon, ''), 'Unknown') AS \"Exon\",\r\n    COALESCE(NULLIF(genetic_variation.dna_variation, ''), 'Unknown') AS \"DNA Variation\",\r\n    COALESCE(NULLIF(genetic_variation.rna_variation, ''), 'Unknown') AS \"RNA Variation\",\r\n    COALESCE(NULLIF(genetic_variation.protein_variation, ''), 'Unknown') AS \"Protein Variation\",\r\n    COALESCE(NULLIF(genetic_variation.technique, ''), 'Unknown') AS \"Technique\",\r\n    CASE \r\n    \tWHEN genetic_variation.deletion_all_exons_tested IS True THEN 'Yes' \r\n        WHEN genetic_variation.deletion_all_exons_tested IS False THEN 'No'\r\n        ELSE 'Unknown' \r\n    END AS \"All Exons Tested (Deletion)\",\r\n    CASE \r\n    \tWHEN genetic_variation.duplication_all_exons_tested IS True THEN 'Yes' \r\n        WHEN genetic_variation.duplication_all_exons_tested IS False THEN 'No'\r\n        ELSE 'Unknown' \r\n    END AS \"All Exons Tested (Duplications)\",\r\n    CASE \r\n    \tWHEN genetic_variation.exon_boundaries_known IS True THEN 'Yes' \r\n        WHEN genetic_variation.exon_boundaries_known IS False THEN 'No'\r\n        ELSE 'Unknown' \r\n    END AS \"Exon Boundaries Known\",\r\n    CASE \r\n    \tWHEN genetic_variation.point_mutation_all_exons_sequenced IS True THEN 'Yes' \r\n        WHEN genetic_variation.point_mutation_all_exons_sequenced IS False THEN 'No'\r\n        ELSE 'Unknown' \r\n    END AS \"All Exons Sequenced (Point Mutation)\",\r\n    CASE \r\n    \tWHEN genetic_variation.all_exons_in_male_relative IS True THEN 'Yes' \r\n        WHEN genetic_variation.all_exons_in_male_relative IS False THEN 'No'\r\n        ELSE 'Unknown' \r\n    END AS \"All expons tested in Male Relative\",\r\n    dmd_diagnosis.diagnosis AS \"Diagnosis\", \r\n    CASE \r\n    \tWHEN dmd_motorfunction.walk IS True THEN 'Yes' \r\n        WHEN dmd_motorfunction.walk IS False THEN 'No'\r\n        ELSE 'Unknown' \r\n    END AS \"Currently Able To Walk\",\r\n    COALESCE(NULLIF(dmd_motorfunction.wheelchair_use, ''), 'Unknown') AS \"Wheelchair Use\",\r\n    CASE \r\n    \tWHEN dmd_steroids.current IS True THEN 'Yes' \r\n        WHEN dmd_steroids.current IS False THEN 'No'\r\n        ELSE 'Unknown' \r\n    END AS \"Current Steroid Theraphy\",\r\n    COALESCE(NULLIF(dmd_steroids.previous, null), 0) AS \"Previous steroid therapy (years)\",\r\n    CASE \r\n    \tWHEN dmd_surgery.surgery IS True THEN 'Yes' \r\n        WHEN dmd_surgery.surgery IS False THEN 'No'\r\n        ELSE 'Unknown' \r\n    END AS \"Scoliosis Surgery\",\r\n    CASE \r\n    \tWHEN dmd_heart.current IS True THEN 'Yes' \r\n        WHEN dmd_heart.current IS False THEN 'No'\r\n        ELSE 'Unknown' \r\n    END AS \"Current cardiac medication\",\r\n    CASE\r\n        WHEN dmd_clinicaltrials.id IS NULL THEN 'No'\r\n        ELSE 'Yes'\r\n    END AS \"Clinical Trials\",\r\n    COALESCE(NULLIF(dmd_clinicaltrials.drug_name, ''), 'Unknown') AS \"Trial Drug Name\",\r\n    COALESCE(NULLIF(dmd_clinicaltrials.trial_name, ''), 'Unknown') AS \"Trial Name\",\r\n    COALESCE(NULLIF(dmd_clinicaltrials.trial_sponsor, ''), 'Unknown') AS \"Trial Sponsor\",\r\n    COALESCE(NULLIF(dmd_clinicaltrials.trial_phase, ''), 'Unknown') AS \"Trial Phase\",\r\n    TO_CHAR(patients_patient.date_of_birth, 'DD-MM-YYYY') AS \"Date of birth\",\r\n    TO_CHAR(dmd_diagnosis.updated, 'DD-MM-YYYY') AS \"Last updated\",\r\n    patients_patient.postcode AS \"State/Province, postcode\",\r\n    CASE \r\n    \tWHEN dmd_motorfunction.sit IS True THEN 'Yes' \r\n        WHEN dmd_motorfunction.sit IS False THEN 'No'\r\n        ELSE 'Unknown' \r\n    END AS \"Currently able to sit without support\",\r\n    CASE \r\n    \tWHEN dmd_heart.failure IS True THEN 'Yes' \r\n        WHEN dmd_heart.failure IS False THEN 'No'\r\n        ELSE 'Unknown' \r\n    END AS \"Heart failure/cardiomyopathy\",\r\n    CASE \r\n    \tWHEN dmd_heart.lvef IS NOT NULL THEN CAST(dmd_heart.lvef AS TEXT) || ' (' || dmd_heart.lvef_date || ')' \r\n        ELSE 'Unknown'\r\n    END AS \"LVEF score and date\",\r\n    COALESCE(NULLIF(dmd_heartmedication.drug, ''), 'Unknown') AS \"Heart Medication Drug\",\r\n    COALESCE(NULLIF(dmd_heartmedication.status, ''), 'Unknown') AS \"Heart Medication Status\",\r\n    COALESCE(NULLIF(dmd_respiratory.non_invasive_ventilation, ''), 'Unknown') AS \"Non Invasive Ventilation\",\r\n    COALESCE(NULLIF(dmd_respiratory.invasive_ventilation, ''), 'Unknown') AS \"Invasive Ventilation\",\r\n    CASE \r\n    \tWHEN dmd_respiratory.fvc IS NOT NULL THEN CAST(dmd_respiratory.fvc AS TEXT) || ' (' || dmd_respiratory.fvc_date || ')' \r\n        ELSE 'Unknown'\r\n    END AS \"FVC score and date\",\r\n    CASE \r\n    \tWHEN dmd_diagnosis.muscle_biopsy IS True THEN 'Yes' \r\n        WHEN dmd_diagnosis.muscle_biopsy IS False THEN 'No'\r\n        ELSE 'Unknown' \r\n    END AS \"Previous Muscle Biopsy\",\r\n\tCASE\r\n        WHEN dmd_otherregistries.id IS NULL THEN 'No'\r\n        ELSE 'Yes'\r\n    END AS \"Other Registries\",\r\n\tCASE\r\n        WHEN dmd_familymember.id IS NULL THEN 'No'\r\n        ELSE 'Yes'\r\n    END AS \"Family History\",    \r\n\tdmd_familymember.id AS \"Family Member ID\",\r\n    COALESCE(NULLIF(dmd_familymember.sex, ''), 'Unknown') AS \"Sex\",\r\n    COALESCE(NULLIF(dmd_familymember.relationship, ''), 'Unknown') AS \"Relationship\",\r\n    COALESCE(NULLIF(dmd_familymember.family_member_diagnosis, ''), 'Unknown') AS \"Diagnosis\"\r\nFROM dmd_diagnosis\r\n\tINNER JOIN patients_patient ON dmd_diagnosis.patient_id = patients_patient.id\r\n    INNER JOIN groups_workinggroup ON groups_workinggroup.id = patients_patient.working_group_id\r\n    FULL JOIN genetic_moleculardata ON genetic_moleculardata.patient_id = patients_patient.id\r\n    FULL JOIN genetic_variation ON genetic_variation.molecular_data_id = genetic_moleculardata.patient_id\r\n    FULL JOIN genetic_gene ON genetic_gene.id = genetic_variation.gene_id\r\n    FULL JOIN dmd_motorfunction ON dmd_diagnosis.id = dmd_motorfunction.diagnosis_id\r\n    FULL JOIN dmd_steroids ON dmd_diagnosis.id = dmd_steroids.diagnosis_id\r\n    FULL JOIN dmd_surgery ON dmd_diagnosis.id = dmd_surgery.diagnosis_id\r\n    FULL JOIN dmd_heart ON dmd_diagnosis.id = dmd_heart.diagnosis_id\r\n    FULL JOIN dmd_heartmedication ON dmd_diagnosis.id = dmd_heartmedication.diagnosis_id\r\n    FULL JOIN dmd_clinicaltrials ON dmd_diagnosis.id = dmd_clinicaltrials.diagnosis_id\r\n    FULL JOIN dmd_respiratory ON dmd_diagnosis.id = dmd_respiratory.diagnosis_id\r\n    FULL JOIN dmd_otherregistries ON dmd_diagnosis.id = dmd_otherregistries.diagnosis_id\r\n    FULL JOIN dmd_familymember ON dmd_diagnosis.id = dmd_familymember.diagnosis_id\r\nWHERE groups_workinggroup.name = '$$jurisdiction$$'", 
        "description": "", 
        "created_by": "Maciej Radochonski (CCG)", 
        "title": "NMD Report"
    }
},
{
    "pk": 3, 
    "model": "explorer.query", 
    "fields": {
        "created_at": "2014-01-30T13:12:56.613", 
        "sql": "SELECT\r\n\tCASE\r\n    \tWHEN patients_patient.date_of_birth BETWEEN '02.09.2009' AND '01.01.2100' THEN 'Up to 3 years'\r\n        WHEN patients_patient.date_of_birth BETWEEN '02.09.2006' AND '01.09.2009' THEN 'Aged 4 to 6'\r\n        WHEN patients_patient.date_of_birth BETWEEN '02.09.2003' AND '01.09.2006' THEN 'Aged 7 to 9'\r\n        WHEN patients_patient.date_of_birth BETWEEN '02.09.2000' AND '01.09.2003' THEN 'Aged 10 to 12'\r\n        WHEN patients_patient.date_of_birth BETWEEN '02.09.1997' AND '01.09.2000' THEN 'Aged 13 to 15'\r\n        WHEN patients_patient.date_of_birth BETWEEN '02.09.1994' AND '01.09.1997' THEN 'Aged 16 to 18'\r\n        WHEN patients_patient.date_of_birth < '01.09.1994' THEN 'Aged 19 and over'\r\n    END AS \"Age group\",\r\n\tgenetic_variation.protein_variation AS \"Protein Variation\",\r\n    genetic_gene.name AS \"Gene\",\r\n    genetic_variation.exon AS \"Exon\",\r\n    genetic_variation.dna_variation AS \"DNA Variation\",\r\n    CASE\r\n    \tWHEN POSITION('>' in genetic_variation.dna_variation) != 0 THEN 'Substitution (point mutation)'\r\n        WHEN POSITION('del' in genetic_variation.dna_variation) != 0 \r\n        \tAND POSITION('ins' in genetic_variation.dna_variation) != 0 THEN 'Insertion/Deletion'\r\n        WHEN POSITION('del' in genetic_variation.dna_variation) != 0 THEN 'Deletion'\r\n        WHEN POSITION('inv' in genetic_variation.dna_variation) != 0 THEN 'Inversion'\r\n        WHEN POSITION('ins' in genetic_variation.dna_variation) != 0 THEN 'Insertion'\r\n        WHEN POSITION('dup' in genetic_variation.dna_variation) != 0 THEN 'Duplication'\r\n        WHEN POSITION('del' in genetic_variation.dna_variation) != 0 THEN 'Deletion'\r\n        ELSE 'Unknown'\r\n    END AS \"DNA Variation - Mutation type\",\r\n    CASE \r\n    \tWHEN genetic_variation.deletion_all_exons_tested IS True THEN 'Yes' \r\n        WHEN genetic_variation.deletion_all_exons_tested IS False THEN 'No'\r\n        ELSE 'Unknown' \r\n    END AS \"All Exons Tested (Deletion)\",\r\n    CASE \r\n    \tWHEN genetic_variation.duplication_all_exons_tested IS True THEN 'Yes' \r\n        WHEN genetic_variation.duplication_all_exons_tested IS False THEN 'No'\r\n        ELSE 'Unknown' \r\n    END AS \"All Exons Tested (Duplications)\",\r\n    CASE \r\n    \tWHEN dmd_motorfunction.walk IS True THEN 'Yes' \r\n        WHEN dmd_motorfunction.walk IS False THEN 'No'\r\n        ELSE 'Unknown' \r\n    END AS \"Currently able to walk\",\r\n    CASE \r\n    \tWHEN dmd_steroids.current IS True THEN 'Yes' \r\n        WHEN dmd_steroids.current IS False THEN 'No'\r\n        ELSE 'Unknown' \r\n    END AS \"Current steroids use\",\r\n    COALESCE(NULLIF(dmd_respiratory.non_invasive_ventilation, ''), 'Unknown') AS \"Non Invasive Ventilation\",\r\n    COALESCE(NULLIF(dmd_respiratory.invasive_ventilation, ''), 'Unknown') AS \"Invasive Ventilation\",\r\n    CASE\r\n        WHEN dmd_clinicaltrials.id IS NULL THEN 'No'\r\n        ELSE 'Yes'\r\n    END AS \"Clinical Trials\",\r\n\tgroups_workinggroup.name AS \"Jurisdiction\"\r\nFROM genetic_variation\r\n\tINNER JOIN genetic_moleculardata ON genetic_variation.molecular_data_id = genetic_moleculardata.patient_id\r\n    INNER JOIN genetic_gene ON genetic_gene.id = genetic_variation.gene_id\r\n    INNER JOIN patients_patient ON patients_patient.id = genetic_moleculardata.patient_id\r\n    INNER JOIN groups_workinggroup ON groups_workinggroup.id = patients_patient.working_group_id\r\n    INNER JOIN dmd_diagnosis ON patients_patient.id = dmd_diagnosis.patient_id\r\n    LEFT JOIN dmd_motorfunction ON dmd_motorfunction.diagnosis_id = dmd_diagnosis.id\r\n    LEFT JOIN dmd_steroids ON dmd_steroids.diagnosis_id = dmd_diagnosis.id\r\n    LEFT JOIN dmd_respiratory ON dmd_respiratory.diagnosis_id = dmd_diagnosis.id\r\n    LEFT JOIN dmd_clinicaltrials ON dmd_clinicaltrials.diagnosis_id = dmd_diagnosis.id\r\nWHERE \r\n\tPOSITION('X' in genetic_variation.protein_variation) != 0 OR\r\n    POSITION('*' in genetic_variation.protein_variation) != 0 OR\r\n    POSITION('>' in genetic_variation.dna_variation) != 0\r\nORDER BY \r\n\tpatients_patient.date_of_birth DESC", 
        "description": "", 
        "created_by": "", 
        "title": "Genetic Report"
    }
}
]
